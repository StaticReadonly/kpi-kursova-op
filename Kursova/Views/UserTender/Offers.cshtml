@model UserTenderOffersViewModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewBag.Title = "Offers";
}

<link rel="stylesheet" href="~/css/TenderOffers.css"/>
<link rel="stylesheet" href="~/css/TenderSearch.css" />

<div class="tendersSearchMainContainer">
    <div class="tendersSearchMainSign">
        Tender Offers:
    </div>
    <div class="tendersListContainer">
        @{
            foreach(var m in Model.Offers)
            {
                <div class="tenderContainer">
                    <div class="offerContainerGap">
                        <div class="tenderItemBorder tenderName">
                            Offerer: 
                            <div>
                                @m.OffererSurname @m.OffererName @m.OffererPatronimyc
                            </div>
                        </div>
                        <div class="tenderItemBorder tenderCost">
                            Price: 
                            <div>
                                @m.Price
                            </div>
                        </div>
                        <div class="tenderItemBorder tenderDesc offerDesc">
                            Description: 
                            <div>
                                @m.Description
                            </div>
                        </div>
                        <div class="tenderItemBorder">
                            Creation date:    
                            <div>
                                @m.CreationDate
                            </div>
                        </div>
                    </div>
                    <div class="tenderItemBorder">
                        State: @m.State
                    </div>
                    <div>
                        @{
                            if (m.StateId == 1)
                            {
                                <form class="offersActions" method="post" asp-controller="UserTender" asp-action="OfferAction">
                                    <input type="hidden" name="tenderId" value="@Model.Id" />
                                    <input type="hidden" name="offerId" value="@m.Id" />
                                    <button type="submit" class="acceptButton" name="action" value="accept">
                                        Accept
                                    </button>
                                    <button type="submit" class="refuseButton" name="action" value="refuse">
                                        Refuse
                                    </button>
                                </form>
                            }
                        }
                    </div>
                </div>
            }
        }
    </div>
    <form method="get" class="tendersNavigationContainer">
        <input type="hidden" asp-for="Id"/>
        <button class="tendersNavigationBtn" type="submit" name="page"
                value="@(Model.CurrentPage - 1)" disabled="@(Model.CurrentPage == 1 ? true : false)">
            Previous page
        </button>
        <span class="tendersPageSign"> @(Model.CurrentPage)/@(Model.TotalPages) </span>
        <button class="tendersNavigationBtn" type="submit" name="page"
                value="@(Model.CurrentPage + 1)" disabled="@(Model.CurrentPage == Model.TotalPages ? true : false)">
            Next page
        </button>
    </form>
</div>